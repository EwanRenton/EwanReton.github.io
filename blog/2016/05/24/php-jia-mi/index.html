
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>php加密 - Ewan Reton</title>
	<meta name="author" content="Ewan Reton">

	
	<meta name="description" content="Php加密 PHP中几种常见的加密方式 Md5()加密算法
Crypt()加密算法
Sha1()加密算法
URL编码加密
Base64编码加密 MD5() 单向加密算法，不可逆 1
string md5(string $str[,bool $raw=output = false]) 单向加密， &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Ewan Reton" type="application/atom+xml">
	
	<link rel="canonical" href="http://ewanreton.github.io/blog/2016/05/24/php-jia-mi/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>	<link type="text/css" rel="stylesheet" href='/prettify/prettify.css' >
	<script src="//libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="/prettify/prettify.js"></script>
	<!--<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>-->
	<script>
  function addBlankTargetForLinks () {
    $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
    });
  }
  $(document).bind('DOMNodeInserted', function(event) {
    addBlankTargetForLinks();
  });
</script>
  

</head>


<body onload="prettyPrint()">
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript" src="/prettify/prettify.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("liukedi001@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
			
		});
	</script>
	
</div>

<div>
	<h1><a href="/">Ewan Reton</a></h1>
	
		<h2 style="color:#666">Never be touched by yourself</h2>
	
</div>
<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="main-nav"><section>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/git/'>git (3)</a></li>
<li class='category'><a href='/blog/categories/javascript/'>javascript (2)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (6)</a></li>
<li class='category'><a href='/blog/categories/mysql/'>mysql (4)</a></li>
<li class='category'><a href='/blog/categories/nginx/'>nginx (5)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (3)</a></li>
<li class='category'><a href='/blog/categories/php/'>php (17)</a></li>
<li class='category'><a href='/blog/categories/weixin/'>weixin (1)</a></li>

  </ul>
</section></nav> 
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:liukedi001@gmail.com" title="Email">Email</a>
		
		
		
			<a class="google" href="https://plus.google.com/116687730759120454062" rel="author" title="Google+">Google+</a>
		
		
		
			<a class="github" href="https://github.com/EwanReton" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Php加密</h1>
	<div class="entry-content" itemprop="articleBody"><h1>PHP中几种常见的加密方式</h1>

<ul>
<li>Md5()加密算法</li>
<li>Crypt()加密算法</li>
<li>Sha1()加密算法</li>
<li>URL编码加密</li>
<li>Base64编码加密</li>
</ul>


<hr />

<!--more-->


<p><strong>MD5()</strong></p>

<ul>
<li>单向加密算法，不可逆</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">string</span> <span class="nb">md5</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$str</span><span class="p">[,</span><span class="nx">bool</span> <span class="nv">$raw</span><span class="o">=</span><span class="nx">output</span> <span class="o">=</span> <span class="k">false</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>单向加密，不可逆</p>

<p>$str:原始字符串</p>

<p>$raw_output：一般不用，如果被设置为true，那么md5报文摘要将以16字节长度的原始二进制格式返回。否则返回以32为字符十六进制数字形式返回散列值。
使用过程中最好使用多次md5</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$str</span><span class="o">=</span><span class="s1">&#39;EwanReton&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$code</span><span class="o">=</span><span class="nb">md5</span><span class="p">(</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$str</span><span class="p">,</span><span class="k">true</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Crypt()</strong></p>

<ul>
<li>单向加密算法，不可逆</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">string</span> <span class="nb">crypt</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$str</span><span class="p">[,</span><span class="nx">string</span> <span class="nv">$salt</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>$str:需要加密的字符串</p>

<p>$salt：盐值。加密时的干扰串，使编码更安全 DES算法标准长度为2 MD5为12
若没有传$salt 将随机生成 否则每次刷新密文不变</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nb">crypt</span><span class="p">(</span><span class="s1">&#39;EwanReton&#39;</span><span class="p">,</span><span class="s1">&#39;ly&#39;</span><span class="p">);</span><span class="c1">//EDS根据盐值的长度自动选用</span>
</span><span class='line'><span class="nx">输出</span><span class="o">:</span><span class="nx">lyxxxxxxxxx</span>
</span><span class='line'><span class="nb">crypt</span><span class="p">(</span><span class="s1">&#39;EwanReton&#39;</span><span class="p">,</span><span class="s1">&#39;$1$ly6661$&#39;</span><span class="p">);</span><span class="c1">//MD5盐值的格式 最多12位</span>
</span><span class='line'><span class="nx">输出：</span><span class="err">$</span><span class="mi">1</span><span class="nv">$ly6661$xxxxxxx</span>
</span></code></pre></td></tr></table></div></figure>


<p>当盐值超过了长度限制会截取相应长度，如EDS中<code>test</code>
会截取成<code>te</code></p>

<p><strong>Sha1()</strong></p>

<ul>
<li>单向加密算法，不可逆</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">string</span> <span class="nb">sha1</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$str</span><span class="p">[,</span><span class="nx">bool</span> <span class="nv">$raw</span><span class="o">=</span><span class="nx">output</span> <span class="o">=</span> <span class="k">false</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>和md5类似使用也和md5类似多次sha1</p>

<p>$str:原始字符串</p>

<p>$raw_output：一般不用，如果被设置为true，那么sha1摘要将以20字节长度的原始二进制格式返回。否则返回以40为字符十六进制数字形式返回散列值。</p>

<p><strong>URL编码加密</strong></p>

<ul>
<li>urlencode(string $str) //编码字符串</li>
<li>urldecode(string $str) //解码</li>
<li>rawurlencode(string $str) //按照RFC1738进行编码

<ul>
<li>解码也可以用urldecode(string $str)</li>
</ul>
</li>
<li>rawurldecode(string $str)</li>
</ul>


<p>编码规范：除了<code>-_.</code>之外所有非字母数字字符都被替换成百分号（%）后跟两位十六进制数，空格则编码为加号（+）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$str</span><span class="o">=</span><span class="s1">&#39;Ewan Reton&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">echo</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$str</span><span class="p">);</span>
</span><span class='line'><span class="k">echo</span> <span class="s2">&quot;&lt;hr/&gt;&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$str</span><span class="o">=</span><span class="s2">&quot;Ewan Reton.php?act=test&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">echo</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$str</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>输出</p>

<pre class="prettyprint linenums">
Ewan+Reton
Ewan+Reton.php%3Fact%3Dtest
</pre>


<p>常见的编码：</p>

<pre class="prettyprint linenums">
? %3F
= %3D
空格 + 按照RFC1738进行编码 为%20
% %25
& %26
\ %5C
+ %2B
</pre>


<p>应用：</p>

<hr />

<p>在使用<code>get</code>方式传值时格式为<code>?key1=vaule&amp;key2=value2</code></p>

<p>但是当我们<code>key1</code>的<code>value</code>为<code>Ewan&amp;Reton</code>在解析时会把Reton也解析成一个传的变量并且值为<code>null</code></p>

<p>为了解决这个问题可以这样处理:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$value</span><span class="o">=</span><span class="s2">&quot;Ewan&amp;Reton&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$str</span><span class="o">=</span><span class="s2">&quot;key1=&quot;</span><span class="o">.</span><span class="nx">urlcode</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;&amp;key2=value2&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">echo</span> <span class="s2">&quot;&lt;a href=&quot;</span><span class="nx">test</span><span class="o">.</span><span class="nx">php</span><span class="o">?</span><span class="s1">&#39;{$str}&#39;</span><span class="o">&gt;</span><span class="nx">test</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span><span class="s2">&quot;;</span>
</span></code></pre></td></tr></table></div></figure>


<p>注意：</p>

<p>这里不需要解码，在识别时会自动识别成<code>key1=Ewan&amp;Reton&amp;key2=value2</code></p>

<hr />

<p><strong>base64编码加密</strong></p>

<ul>
<li>base64_encode(string $data)</li>
<li>base64_decode(string $data[,bool $strict=false])

<ul>
<li>//如果输出的数据超出了base64字母表则返回false</li>
</ul>
</li>
</ul>


<p>将任何2进制字符编码到一个可打印的64字符中，中文和图片都可编码。解决早起邮件网关只能识别ASCII。</p>

<p>主要作用将非ASCII码的数据转换成ASCII，其实是一个数据编码并算不上加密算法。</p>

<h1>加密技术分类</h1>

<p><strong>单向散列加密</strong></p>

<p>通过对不同输入长度的信息进行散列计算，得到固定长度的输出，这个散列计算过程是单向的，即不能通过输出反推输入。</p>

<p><strong>对称加密技术</strong></p>

<p>加密和解密使用的密钥是同一个密钥或者可以相互推算。</p>

<p><strong>非对称加密技术</strong></p>

<p>加密和解密使用的密钥不是同一个，其中一个对外公开，被称为公钥，另一个只有拥有者知道。</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	 
  <!-- JiaThis Button BEGIN -->
<div class="jiathis_style_32x32">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
  
</div>



  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/blog/2016/05/24/php-jia-mi" data-title="php加密" data-url="http://ewanreton.github.io/blog/2016/05/24/php-jia-mi/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"ewanreton"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end --></div>
  </section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2016

    Ewan Reton


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	






<!--
-->


</body>
</html>
